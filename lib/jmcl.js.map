{"version":3,"file":"jmcl.js","sources":["../src/osutil.ts","../src/compatibility-rule.ts","../src/mcarg.ts","../src/promise.ts","../src/version.ts","../src/util.ts","../src/user.ts","../src/dirs.ts","../src/launcher.ts","../src/logout.ts","../src/log.ts","../src/mcenv.ts"],"sourcesContent":["import * as os from 'os';\n\nvar darwin2mac = {\n    '0.1': '0.1',\n    '0.2': '1.0.1',\n    \n};\n\nexport function getOS(): { osName: string, osV: string, osArch: string }{\n    var sn: string = os.type();\n    var v = os.release();\n    var a = os.arch();\n    switch(sn){\n        case 'Darwin': \n            sn = 'osx';\n            break;\n        case 'Windows_NT':\n            sn = 'windows';\n            break;\n        case 'Linux':\n            sn = 'linux';\n            break;\n        default:\n            sn = 'unknown';\n    }\n\n    if(a === 'x64'){\n        a = 'x86';\n    }\n\n    return {\n        osName: sn,\n        osV: v,\n        osArch: a\n    };\n}","import { MCConfig } from './mcenv';\nimport { getOS } from './osutil';\n\nexport interface CompatibilityRule {\n    action: 'allow';\n    features?: {\n        has_custom_resolution?: boolean;\n        is_demo_user?: boolean;\n    };\n    os?: {\n        name?: string;\n        version?: string;\n        arch?: string;\n    };\n}\nexport function checkRule(env: MCConfig, rules: CompatibilityRule[]){\n    for (let rule of rules){\n        if(rule.os){\n            var { osName, osV, osArch } = getOS();\n            if(rule.os.name && rule.os.name !== osName){\n                return false;\n            }\n            if(rule.os.version && !new RegExp(rule.os.version).test(osV)){\n                return false;\n            }\n            if(rule.os.arch && rule.os.arch !== osArch){\n                return false;\n            }\n        }\n        if(rule.features){\n            if(rule.features.has_custom_resolution && !env.resolution){\n                return false;\n            }\n            if(rule.features.is_demo_user && !env.isDemo){\n                return false;\n            }\n        }\n    }\n    return true;\n}","import * as os from 'os';\nimport { CompatibilityRule, checkRule } from './compatibility-rule';\nimport { MCConfig } from './mcenv';\n\nexport interface EnvironmentVars {\n\n}\n\nexport interface MCArg {\n    arg(name: string, val: string): MCArg;\n    jvmArg(): string;\n    gameArg(): string;\n}\n\nexport class LegacyMCArg implements MCArg {\n    argv: {[s: string]: string} = {};\n    constructor(public argTemp: string){}\n    arg(name: string, v: string){\n        this.argv[name] = v;\n        return this;\n    }\n    gameArg(){\n        var ret = this.argTemp;\n        for(var name in this.argv){\n            ret = ret.replace('${' + name + '}', this.argv[name]);\n        }\n        return ret;\n    }\n    jvmArg(){\n        return [\n            `-cp ${this.argv.classpath}`,\n            `-Djava.library.path=${this.argv.natives_directory}`,\n            `-Duser.home=${this.argv.user_home}`,\n        ].join(' ');\n    }\n}\ntype ArgumentItem = string | CompoundArgumentItem;\ninterface CompoundArgumentItem {\n    value: string[] | string;\n    compatibilityRules?: CompatibilityRule[];\n    rules?: CompatibilityRule[];\n}\n\nexport interface ArgumentJson {\n    game: ArgumentItem[];\n    jvm: ArgumentItem[];\n}\n\nexport class NewMCArg implements MCArg {\n    argv: {[s: string]: string} = {};\n\n    constructor(private _argJson: ArgumentJson, public cfg: MCConfig){}\n\n    private _replaceVals(ret: string){\n        for(var name in this.argv){\n            ret = ret.replace('${' + name + '}', this.argv[name]);\n        }\n        return ret;\n    }\n\n    private _allowed(arg: CompoundArgumentItem): boolean{\n        if (arg.compatibilityRules){\n            return checkRule(this.cfg, arg.compatibilityRules);\n        }\n        else if (arg.rules) {\n            return checkRule(this.cfg, arg.rules);\n        }\n        else\n            return true;\n    }\n\n    private _genArg(argItem: ArgumentItem[]): string{\n        var ret: string[] = [];\n        for(var arg of argItem){\n            if (typeof arg === 'string')\n                ret.push(this._replaceVals(arg));\n            else\n                if(this._allowed(arg)){\n                    if (typeof arg.value === 'string')\n                        ret.push(this._replaceVals(arg.value));\n                    else\n                        for(var val of arg.value){\n                            ret.push(this._replaceVals(val));\n                        }\n                }\n        }\n        return ret.join(' ');\n    }\n    arg(name: string, v: string){\n        this.argv[name] = v;\n        return this;\n    }\n    gameArg(){\n        return this._genArg(this._argJson.game);\n    }\n    jvmArg(){\n        return this._genArg(this._argJson.jvm);\n    }\n}","import * as fs from 'fs';\nimport * as cpc from 'child_process';\nimport * as https from 'https';\nimport * as readline from 'readline';\nimport { Writable } from 'stream';\n\nexport function pass<T>(arg): Promise<T>{\n    return new Promise<T>(function(acc, reject){\n        acc(arg);\n    });\n}\nexport function reject<T>(reason: T): PromiseLike<any>{\n    return new Promise(function(acc, reject){\n        reject(reason);\n    });\n}\nexport function fileExists(fn): Promise<boolean>{\n    return new Promise(function(acc, reject){\n        fs.exists(fn, function(exi){\n            acc(exi);\n        });\n    }) as Promise<boolean>;\n}\nexport function mkdir(path, mask){\n    return new Promise(function(acc, rej){\n        fs.mkdir(path, mask, function(err){\n            err ? rej(err) : acc();\n        });\n    });\n}\nexport function mkdirIfNotExists(path, mask){\n    return fileExists(path)\n        .then(function(exi){\n            if(!exi){\n                return mkdir(path, mask);\n            }\n        });\n}\nexport function readFile(fn): Promise<string>{\n    return new Promise(function(acc, reject){\n        fs.readFile(fn, function(err, data){\n            err ? reject(err) : acc(data.toString());\n        });\n    }) as Promise<string>;\n}\nexport function writeFile(fn, s){\n    return new Promise(function(acc, reject){\n        fs.writeFile(fn, s, function(err){\n            err ? reject(err) : acc();\n        });\n    });\n}\nexport function exec(cmd: string, stdout, stderr){\n    return new Promise(function(acc, reject){\n        var pr = cpc.exec(cmd, function(err, stdout, stderr){\n            err ? reject(err) : acc();\n        });\n        pr.stdout.pipe(stdout);\n        pr.stderr.pipe(stderr);\n    });\n}\nexport interface AjaxOptions {\n    host: string;\n    port: number;\n    path: string;\n    method: string;\n    headers: {[s: string]: string};\n    body?: string;\n}\nexport function ajax(opt: AjaxOptions): Promise<string>{\n    var reqOpt = {\n        host: opt.host,\n        port: opt.port,\n        path: opt.path,\n        method: opt.method,\n        headers : opt.headers\n    };\n    return new Promise((acc, rej) => {\n        var data = '';\n        var req = https.request(opt, res => {\n            res.setEncoding('utf-8');\n            res.on('data', d => data += d);\n            res.on('end', () => acc(data));\n        });\n        req.on('error', e => rej(e));\n        opt.body && req.write(opt.body);\n        req.end();\n    }) as Promise<string>;\n}\nexport function httpsGet(host: string, path: string): Promise<string>{\n    return ajax({\n        host,\n        path,\n        port: 443,\n        method: 'GET',\n        headers: {}\n    });\n}\nexport function httpsPost(host: string, path: string, data: any): Promise<string>{\n    var postBody = JSON.stringify(data);\n    return ajax({\n        host,\n        path,\n        port: 443,\n        method: 'POST',\n        headers : {\n            'Content-Type': 'application/json',\n            'Content-Length': String(postBody.length)\n        },\n        body: postBody\n    });\n}\nexport function input(question: string, hidden: boolean = false): Promise<string>{\n    var mutableStdout = new Writable({\n        write(chunk, encoding, callback) {\n            if (muted)\n                process.stdout.write(chunk as string, encoding);\n            callback();\n        }\n    });\n    var muted = true;\n    var rl = readline.createInterface({\n        input: process.stdin,\n        output: hidden ? mutableStdout : process.stdout,\n        terminal: true\n    });\n    return new Promise(function(acc, rej){\n        muted = true;\n        rl.question(question, function(answer){\n            console.log('');\n            rl.close();\n            acc(answer);\n        });\n        muted = false;\n    }) as Promise<string>;\n}\n","import * as fs from 'fs';\nimport { Context, MCConfig } from './mcenv.js';\nimport { LegacyMCArg, MCArg, ArgumentJson, NewMCArg } from './mcarg.js';\nimport * as p from './promise';\n\nclass VersionManager {\n    versions: {[v: string]: Version} = {};\n    constructor(public ctx: Context){}\n    async getVersion(vname: string): Promise<Version>{\n        var ret = this.versions[vname];\n        var cela = this;\n        if(!ret){\n            var jsonPath = cela.ctx.getVersionDir(vname) + '/' + vname + '.json';\n            ret = cela.versions[vname] = new Version(cela, vname, JSON.parse(await p.readFile(jsonPath)));\n        }\n        return ret;\n    }\n}\ninterface DownloadInfo {\n    url: string;\n    sha1: string;\n    size: number;\n};\ninterface LibraryData {\n    name: string;\n    natives?: {[os: string]: string};\n    downloads: {\n        artifact: DownloadInfo, \n        classifiers: {[name: string]: DownloadInfo}\n    };\n}\ninterface VersionData {\n    libraries: { name: string }[];\n    mainClass: string;\n    minecraftArguments?: string;\n    arguments?: ArgumentJson;\n    assets: string;\n    type: string;\n}\nclass Version {\n    constructor(public mgr: VersionManager, public vname: string, public versionJson: VersionData){}\n    getJars(): string[]{\n        var libdir = this.mgr.ctx.getMCRoot() + '/libraries';\n        var ret: string[] = [];\n        for(var lib of this.versionJson.libraries){\n            var name = lib.name;\n            var parts = name.split(':');\n            var pkg = parts[0].replace(/\\./g, \"/\");\n            var clazz = parts[1];\n            var classv = parts[2];\n            \n            ret.push(\n                [libdir, pkg, clazz, classv, clazz + '-' + classv + '.jar'].join('/')\n            );\n        }\n        //todo: inherits from\n        return ret;\n    }\n    getNativeDir(){\n        return this.mgr.ctx.getVersionDir(this.vname) + '/' + this.vname + '-natives/';\n    }\n    getMainClass (){\n        return this.versionJson.mainClass;\n    }\n    getJarName(){\n        return this.mgr.ctx.getVersionDir(this.vname) + '/' + this.vname + '.jar';\n    }\n    getArgs(cfg: MCConfig): MCArg{\n        var arg: MCArg;\n        if('minecraftArguments' in this.versionJson){\n            arg = new LegacyMCArg(this.versionJson.minecraftArguments);\n        }\n        else {\n            arg = new NewMCArg(this.versionJson.arguments, cfg);\n        }\n        var env = this.mgr.ctx;\n        return arg\n                .arg('version_name', this.vname)\n                .arg('game_directory', env.getMCRoot())\n                .arg('assets_root', env.getMCRoot() + '/assets')\n                .arg('assets_index_name', this.versionJson.assets)\n                .arg('version_type', this.versionJson.type);\n    }\n}\n\ninterface VersionManifest {\n    __comment?: string,\n    latest: { snapshot: string, release: string },\n    versions: { id: string, type: string, time:string, releaseTime: string, url: string }[]\n}\nexport async function getVersionManifest(config: MCConfig){\n    return JSON.parse(await p.httpsGet(config.launcherMetaURL, '/mc/game/version_manifest.json'));\n}\n\nexport { VersionManager }","export function randHex(len){\n    var ret = '';\n    while(len --> 0){\n        ret += (Math.round((Math.random() * 100)) % 16).toString(16);\n    }\n    return ret;\n}\n","import { Context } from './mcenv';\nimport { randHex } from './util';\nimport * as p from './promise';\nimport { LegacyMCArg, MCArg } from './mcarg';\n\nconst authServerInfo = {\n    host: 'authserver.mojang.com',\n    validate: '/validate',\n    login: '/authenticate',\n    refresh: '/refresh',\n    invalidate: '/invalidate',\n    logout: '/signout'\n};\nexport class UserManager{\n    users: {[s: string]: MojangUser} = {};\n    saveFileName = 'users.json';\n    constructor(public ctx: Context){}\n    async loadFromFile(){\n        var fn = this.ctx.getLauncherDir() + '/' + this.saveFileName;\n        var cela = this;\n        if(await p.fileExists(fn)){\n            cela.ctx.log.i('user file exists, reading');\n            var us = JSON.parse(await p.readFile(fn)) as {[s: string]: MojangUserData};\n            for(var name in us){\n                var u = us[name];\n                cela.users[name] = new MojangUser(u);\n            }\n            cela.ctx.log.i('done loading users');\n        }\n        else {\n            cela.ctx.log.i('user file not exists, skipping');\n        }\n        return true;\n    }\n    async save(){\n        var fn = this.ctx.getLauncherDir() + '/' + this.saveFileName;\n        var log = this.ctx.log;\n        await p.writeFile(fn, JSON.stringify(this.users));\n        log.v('user file saved');\n        return true;\n    }\n    offlineUser(uname: string){\n        // offline users neednt be saved.\n        return new OfflineUser(uname);\n    }\n    mojangUser(email: string): MojangUser{\n        return this.users[email] || new MojangUser({email: email});\n    }\n    getUser(email: string): MojangUser{\n        return this.users[email];\n    }\n    async addMojangUser(u: MojangUser){\n        this.users[u.email] = u;\n        return this.save();\n    }\n    async logoutUser(u: MojangUser, getPass: () => Promise<string>){\n        async function logout2(pass: string){\n            var res = await p.httpsPost(authServerInfo.host, authServerInfo.logout, {\n                username: u.email,\n                password: pass\n            });\n            if(res !== ''){\n                throw JSON.parse(res).errorMessage;\n            }\n            return true;\n        }\n        var cela = this;\n        var log = this.ctx.log;\n        if(await u.validAndRefresh(this.ctx)){\n            log.i('user is valid, logging out');\n            await u.logout();\n            log.i('successfully logged out');\n            delete cela.users[u.email];\n        }\n        else {\n            log.i('user is not valid, logging out using password');\n            await logout2(await getPass());\n            log.i('successfully logged out');\n            delete cela.users[u.email];\n        }\n        return cela.save();\n    }\n}\n\nexport abstract class User {\n    abstract getType(): string;\n    abstract getName(): string;\n    abstract getUUID(): string;\n    abstract getToken(): string;\n    initArg(arg: MCArg){\n        arg\n            .arg('user_type', this.getType())\n            .arg('auth_player_name', this.getName())\n            .arg('auth_uuid', this.getUUID())\n            .arg('auth_access_token', this.getToken())\n    }\n}\n\nclass OfflineUser extends User{\n    constructor(public name: string){ super(); }\n    getType(){ return 'legacy'; }\n    getName(){ return this.name; }\n    getUUID(){ return '{}'; }\n    getToken(){ return '{}'; }\n}\ninterface UserProfile {\n    id: string;\n    name: string;\n}\ninterface MojangUserData {\n    email: string;\n    accessToken?: string;\n    clientToken?: string;\n    profiles?: UserProfile[];\n    selectedProfile?: UserProfile;\n    user?: {id: string, properties: {[s: string]: string}};\n}\nclass MojangUser extends User{\n    email: string;\n    accessToken: string;\n    clientToken: string;\n    profiles: UserProfile[];\n    selectedProfile: UserProfile;\n    user: {id: string, properties: {[s: string]: string}};\n\n    constructor(u: MojangUserData){\n        super();\n        this.email = u.email;\n        this.accessToken = u.accessToken || '';\n        this.clientToken = u.clientToken || randHex(32);\n    \n        this.profiles = u.profiles || [];\n        this.selectedProfile = u.selectedProfile || null;\n    \n        this.user = u.user || {\n            id: '',\n            properties: {}\n        };\n    }\n    getType(){ return 'mojang'; }\n    getName(){ return this.selectedProfile.name; }\n    getUUID(){ return this.selectedProfile.id; }\n    getToken(){ return this.accessToken; }\n    needsLogin(){ return this.accessToken === ''; }\n    async login(pass: string, version: string = '1.0'){\n        var cela = this;\n        var resRaw = await p.httpsPost(authServerInfo.host, authServerInfo.login, {\n            username: this.email,\n            password: pass,\n            clientToken: this.clientToken,\n            agent: { name: 'Minecraft', version },\n            requestUser: true\n        });\n        var res = JSON.parse(resRaw);\n        if(res.error){\n            throw 'logging failed: ' + res.errorMessage;\n        }\n        else {\n            if(res.clientToken !== cela.clientToken){\n                throw 'client token changed, which shouldnt happen';\n            }\n            cela.accessToken = res.accessToken;\n            cela.profiles = res.availableProfiles;\n            cela.selectedProfile = res.selectedProfile || res.availableProfiles[0];\n            cela.user.id = res.user.id;\n            cela.user.properties = res.user.properties;\n        }\n        return true;\n    }\n    async validate(){\n        var cela = this;\n        return '' === await p.httpsPost(authServerInfo.host, authServerInfo.validate, {\n            clientToken: this.clientToken,\n            accessToken: this.accessToken\n        });\n    }\n    async validAndRefresh(ctx: Context){\n        var log = ctx.log;\n        var cela = this;\n        if(this.needsLogin()){\n            log.i('user has not logged in');\n            return false;\n        }\n        log.i('checking user validity');\n        if(!await this.validate()){\n            log.i('user not valid, refreshing');\n            await this.refresh();\n        }\n        return true;\n    }\n    async makeValid(ctx: Context, version: string, getPass: () => Promise<string>){\n        var log = ctx.log;\n        var cela = this;\n        async function login1(){\n            var pass = await getPass();\n            log.i('logging in');\n            await cela.login(pass, version);\n            log.i('logging in successful');\n            return true;\n        }\n        if(await this.validAndRefresh(ctx)){\n            log.i('user is valid');\n        }\n        else {\n            log.i('user is invalid, login required');\n            return login1();\n        }\n        return true;\n    }\n    async refresh(){\n        var cela = this;\n        var resRaw = await p.httpsPost(authServerInfo.host, authServerInfo.refresh, {\n            clientToken: this.clientToken,\n            accessToken: this.accessToken,\n            selectedProfile: null, //this.selectedProfile,\n            requestUser: true\n        });\n\n        var res = JSON.parse(resRaw);\n        if(res.error){\n            throw res.errorMessage;\n        }\n        else {\n            cela.accessToken = res.accessToken;\n            // cela.profiles = res.availableProfiles;\n            cela.selectedProfile = res.selectedProfile;\n            cela.user.id = res.user.id;\n            cela.user.properties = res.user.properties;\n            // return true;\n        }\n        return true;\n    }\n    async logout(){\n        var res = await p.httpsPost(authServerInfo.host, authServerInfo.invalidate, {\n            accessToken: this.accessToken,\n            clientToken: this.clientToken\n        });\n        if(res === ''){\n            return null;\n        }\n        else {\n            throw JSON.parse(res).errorMessage;\n        }\n    }\n    \n}\n","import * as p from './promise';\nimport { Context } from './main';\n\nexport async function prepareDirs(ctx: Context): Promise<void>{\n    await p.mkdirIfNotExists(ctx.getMCRoot(), null);\n    await p.mkdirIfNotExists(ctx.getLauncherDir(), null);\n    return;\n}","import * as cpc from 'child_process';\nimport { VersionManager } from './version';\nimport { UserManager, User } from './user';\nimport { prepareDirs } from './dirs';\nimport * as p from './promise';\nimport { Context } from './mcenv';\n\nexport interface LaunchOption {\n    uname: string;\n    version: string;\n    offline: boolean;\n}\nexport async function launch(ctx: Context, opt: LaunchOption){\n    if(!opt.uname){\n        throw new Error('user name not present');\n    }\n    if(!opt.version){\n        throw new Error('version not given');\n    }\n    opt.offline = !!opt.offline;\n    var log = ctx.log;\n    \n    async function launch1(): Promise<void>{\n        var vmgr = new VersionManager(ctx);\n        var umgr = new UserManager(ctx);\n        var user: User;\n        await prepareDirs(ctx);\n        await umgr.loadFromFile();\n        if(opt.offline){\n            user = umgr.offlineUser(opt.uname);\n        }\n        else {\n            var user2 = umgr.mojangUser(opt.uname);\n            await user2.makeValid(ctx, opt.version, () => {\n                return ctx.readInput(`password for ${user2.email}:`, true);\n            });\n            await umgr.addMojangUser(user2);\n            user = user2;\n        }\n        var v = await vmgr.getVersion(opt.version);\n        var mcargs = v.getArgs(ctx.config);\n        var jars = v.getJars();\n        jars.push(v.getJarName());\n        user.initArg(mcargs);\n\n        mcargs.arg('classpath', jars.join(':'))\n            .arg('natives_directory', v.getNativeDir())\n            .arg('user_home', ctx.config.home)\n\n            .arg('launcher_name', ctx.launcherName)\n            .arg('launcher_version', ctx.launcherVersion);\n        \n        log.i('generating arguments');\n        var cmd = [\n            'java',\n            \"-Xincgc\",\n            '-XX:-UseAdaptiveSizePolicy',\n            '-XX:-OmitStackTraceInFastThrow',\n            '-Xmn128m',\n            '-Xmx2048M',\n            mcargs.jvmArg(),\n            v.getMainClass(),\n            mcargs.gameArg()\n        ];\n\n        log.v(`arguments: ${cmd.join(' ')}`);\n    \n        log.i('launching game');\n        await p.exec(cmd.join(' '), process.stdout, process.stderr);\n        log.i('game quit');\n    }\n\n    try {\n        await launch1();\n    }\n    catch(e){\n        log.e(e);\n    }\n}","import { prepareDirs } from \"./dirs\";\nimport { UserManager } from \"./user\";\nimport { Context } from \"./main\";\n\n\nexport async function logout(ctx: Context, opts): Promise<void>{\n    var log = ctx.log;\n    var umgr = new UserManager(ctx);\n    try {\n        await prepareDirs(ctx);\n        await umgr.loadFromFile();\n        var user = umgr.mojangUser(opts.uname);\n        await umgr.logoutUser(user, () => {\n            return ctx.readInput(`password for ${user.email}:`, true);\n        });\n    }\n    catch(msg){\n        log.e(msg);\n    }\n}","export enum LogLevel {\n    verbose = 0,\n    info = 1,\n    warn = 2,\n    err = 3\n}\n\nexport class Log {\n    constructor(public c: Console, public level: LogLevel = LogLevel.info){}\n    i(s){\n        this.level <= LogLevel.info && this.c.log('[jmcl/INFO] ' + s);\n    }\n    \n    v(s){\n        this.level <= LogLevel.verbose && this.c.log('[jmcl/VERBOSE] ' + s);\n    }\n    \n    e(s){\n        this.level <= LogLevel.err && this.c.log('[jmcl/ERR] ' + s);\n    }\n    \n    w(s){\n        this.level <= LogLevel.warn && this.c.log('[jmcl/WARN] ' + s);\n    }\n}\n","import * as os from 'os';\nimport { Log, LogLevel } from './log';\nimport { input } from './promise';\n\nexport interface MCConfig {\n    launcherRoot: string;\n    home: string;\n    mcRoot: string;\n    resolution: number[];\n    isDemo: boolean;\n    launcherMetaURL: string;\n}\nexport class Context {\n    // launcherRoot = '.jmcl';\n    // home = '/home/cfy';\n    // mcRoot = '.minecraft';\n    config: MCConfig = {\n        launcherRoot: '.jmcl',\n        home: '/home/cfy',\n        mcRoot: '.minecraft',\n        resolution: null,\n        isDemo: false,\n\n        launcherMetaURL: 'launchermeta.mojang.com'\n    };\n    launcherName: string;\n    launcherVersion: string;\n    log: Log;\n\n    constructor(public console: Console, logLevel: string){\n        this.log = new Log(console, LogLevel[logLevel]);\n        this.config.home = os.homedir();\n    }\n    getMCRoot(){\n        return `${this.config.home}/${this.config.mcRoot}`;   \n    }\n    getVersionDir(vname: string){\n        // return this.config.home + '/' + this.config.mcRoot + '/versions/' + vname;\n        return `${this.config.home}/${this.config.mcRoot}/versions/${vname}`;\n    }\n    getLauncherDir(){\n        // return this.config.home + '/' + this.config.mcRoot + '/' + this.config.launcherRoot;\n        return `${this.config.home}/${this.config.mcRoot}/${this.config.launcherRoot}`;\n    }\n    async readInput(q: string, hidden: boolean){\n        return input(q, hidden);\n    }\n}"],"names":["os.type","os.release","os.arch","fs.exists","fs.mkdir","fs.readFile","fs.writeFile","cpc.exec","https.request","Writable","readline.createInterface","p.readFile","p.fileExists","p.writeFile","pass","p.httpsPost","p.mkdirIfNotExists","p.exec","os.homedir"],"mappings":"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"}